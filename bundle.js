(()=>{"use strict";(()=>{const e=document.querySelectorAll(".button"),t=document.querySelector(".modal"),o=document.querySelector(".page"),c=document.querySelector(".modal__close"),s=document.querySelector(".modal-success__close"),n=document.querySelector(".modal__form"),l=document.querySelector(".modal__phone"),a=document.querySelector(".modal__name"),r=document.querySelector(".modal-success"),i=e=>{"Escape"===e.code&&_()},u=e=>{e.target===t&&_()},d=()=>{t.classList.remove("hidden"),document.addEventListener("click",u),document.addEventListener("keydown",i),o.classList.add("no-scroll"),b(),a.addEventListener("input",x),a.addEventListener("focusin",v),a.addEventListener("focusout",m),l.addEventListener("input",V),l.addEventListener("focusin",v),l.addEventListener("focusout",m),n.addEventListener("submit",E)},v=()=>{document.removeEventListener("keydown",i)},m=()=>{document.addEventListener("click",u)},_=()=>{t.classList.add("hidden"),document.removeEventListener("click",u),document.removeEventListener("keypress",i),o.classList.remove("no-scroll"),a.removeEventListener("input",x),a.removeEventListener("focusin",v),a.removeEventListener("focusout",m),l.removeEventListener("focusin",v),l.removeEventListener("focusout",m),l.removeEventListener("input",V),n.removeEventListener("submit",E),l.value="",a.style.outline="",a.style.background=""};e.forEach((e=>{e.addEventListener("click",d)})),c&&c.addEventListener("click",_);const L=e=>{"Escape"===e.code&&y()},f=e=>{e.target===r&&y()},y=()=>{r.classList.add("hidden"),document.removeEventListener("click",f),document.removeEventListener("keypress",L),o.classList.remove("no-scroll")};s&&s.addEventListener("click",y);const E=e=>{e.preventDefault(),""===l.value?l.setCustomValidity("Заполните, пожалуйста, номер"):(l.setCustomValidity(""),_(),r.classList.remove("hidden"),document.addEventListener("click",f),document.addEventListener("keydown",L),o.classList.add("no-scroll")),l.reportValidity(),p()};IMask(l,{mask:"+{7}(000)000-00-00"});let h=!0,g="";try{g=localStorage.getItem("login")}catch(e){h=!1}const p=()=>{h&&localStorage.setItem("login",a.value)},b=()=>{g?(a.value=g,l.focus()):a.focus()},k=/^[A-zА-яЁё]+$/,S="Укажите, пожалуйста, имя",q="Заполните, пожалуйста, имя на кириллице или латинице",C="Слишком много букв",x=()=>{const e=a.value.toLowerCase().split(" ").every((e=>k.test(e)));a.setCustomValidity(""),e||(a.setCustomValidity(q),a.style.outline="2px solid red",a.style.background="pink"),a.value.length>10&&a.setCustomValidity(C),""===a.value&&a.setCustomValidity(S),a.reportValidity(),e||""===a.value||!a.value.length>10?(a.style.outline="",a.style.background=""):(a.style.outline="2px solid red",a.style.background="pink")},V=()=>{l.value.length<16&&l.value.length>1?l.setCustomValidity("Номер должен быть из 10 цифр"):l.setCustomValidity(""),l.reportValidity()}})(),(()=>{const e=window.matchMedia("(max-width: 1023px)"),t=document.querySelector(".navigation__list"),o=document.querySelector(".navigation__toggle-mobile"),c=document.querySelectorAll(".navigation__toggle-mobile svg");e.matches&&t.classList.add("hidden"),o.addEventListener("click",(()=>{t.classList.toggle("hidden"),c.forEach((e=>{e.classList.toggle("hidden")})),document.body.classList.toggle("no-scroll"),t.classList.toggle("scroll")}))})(),(()=>{const e=document.querySelectorAll(".offers__button"),t=document.querySelectorAll(".offers__profit"),o=document.querySelector(".offers__list"),c=document.querySelectorAll(".offers__button-percent"),s=document.querySelectorAll(".offers__percents"),n=document.querySelector(".offers__list-percent"),l=()=>{t.forEach((e=>{e.classList.add("hidden"),e.classList.remove("offers__profit--active")})),e.forEach((e=>{e.classList.remove("offers__button--active")}))},a=(o=0)=>{t[o].classList.remove("hidden"),t[o].classList.add("offers__profit--active"),e[o].classList.add("offers__button--active")};l(),a(),o.addEventListener("click",(t=>{const o=t.target;o&&o.classList.contains("offers__button")&&e.forEach(((e,t)=>{o===e&&(l(),a(t))}))}));const r=()=>{s.forEach((e=>{e.classList.add("hidden"),e.classList.remove("offers__percents--active")})),c.forEach((e=>{e.classList.remove("offers__button--active")}))},i=(e=0)=>{s[e].classList.remove("hidden"),s[e].classList.add("offers__percents--active"),c[e].classList.add("offers__button--active")};r(),i(),n.addEventListener("click",(e=>{const t=e.target;t&&t.classList.contains("offers__button-percent")&&c.forEach(((e,o)=>{t===e&&(r(),i(o))}))}))})(),(()=>{const e=document.querySelector(".calculator__summ"),t=document.querySelectorAll(".calculator__button-up"),o=document.querySelectorAll(".calculator__button-bottom"),c=document.querySelector(".calculator__buttons-top"),s=document.querySelector(".calculator__buttons-bottom");document.querySelector(".calculator__text-percent");let n=document.querySelector(".calculator__text-month"),l=document.querySelector(".calculator__text-year");const a=document.getElementById("six-months"),r=document.getElementById("twelve-months"),i=document.getElementById("at-the-end"),u=document.getElementById("monthly"),d=1e5,v=5e6;a.value=2,r.value=3,i.value=4,u.value=5;const m=e=>{const t=c.querySelector(".calculator__button--active"),{target:o}=e;o.classList.contains("calculator__button--active")||(t.classList.remove("calculator__button--active"),o.classList.add("calculator__button--active"))},_=e=>{const t=s.querySelector(".calculator__button--active"),{target:o}=e;o.classList.contains("calculator__button--active")||(t.classList.remove("calculator__button--active"),o.classList.add("calculator__button--active"))};t.forEach((e=>{e.addEventListener("click",m)})),o.forEach((e=>{e.addEventListener("click",_)})),e.addEventListener("input",(()=>{e.value>v?(e.value=v,e.setCustomValidity("Максимальная сумма 5 млн рублей")):e.setCustomValidity(""),e.reportValidity()}));const L=()=>e.value<=v&&e.value>=d?.15*e.value:e.value<d||e.value>v?0*e.value:void 0,f=()=>e.value<=v&&e.value>=d?.2*e.value:e.value<d||e.value>v?0*e.value:void 0;e.addEventListener("input",(()=>{n.textContent=Math.floor(100*L())/100*a.value})),e.addEventListener("input",(()=>{l.textContent=Math.floor(100*f())/100*i.value})),a.addEventListener("click",(()=>{n.textContent=Math.floor(100*L())/100*a.value,l.textContent=Math.floor(100*f())/100*i.value})),r.addEventListener("click",(()=>{n.textContent=Math.floor(100*L())/100*r.value,l.textContent=Math.floor(100*f())/100*r.value})),i.addEventListener("click",(()=>{n.textContent=Math.floor(100*L())/100*a.value,l.textContent=Math.floor(100*f())/100*i.value})),u.addEventListener("click",(()=>{n.textContent=Math.floor(100*L())/100*u.value,l.textContent=Math.floor(100*f())/100*u.value}))})()})();