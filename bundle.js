(()=>{"use strict";(()=>{const e=document.querySelectorAll(".button"),t=document.querySelector(".modal"),o=document.querySelector(".page"),s=document.querySelector(".modal__close"),n=document.querySelector(".modal-success__close"),l=document.querySelector(".modal__form"),d=document.querySelector(".modal__phone"),i=document.querySelector(".modal__name"),c=document.querySelector(".modal-success"),r=e=>{"Escape"===e.code&&L()},a=e=>{e.target===t&&L()},u=()=>{t.classList.remove("hidden"),document.addEventListener("click",a),document.addEventListener("keydown",r),o.classList.add("no-scroll"),f(),i.addEventListener("input",C),i.addEventListener("focusin",m),i.addEventListener("focusout",v),d.addEventListener("input",w),d.addEventListener("focusin",m),d.addEventListener("focusout",v),l.addEventListener("submit",k)},m=()=>{document.removeEventListener("keydown",r)},v=()=>{document.addEventListener("click",a)},L=()=>{t.classList.add("hidden"),document.removeEventListener("click",a),document.removeEventListener("keypress",r),o.classList.remove("no-scroll"),i.removeEventListener("input",C),i.removeEventListener("focusin",m),i.removeEventListener("focusout",v),d.removeEventListener("focusin",m),d.removeEventListener("focusout",v),d.removeEventListener("input",w),l.removeEventListener("submit",k),d.value="",i.style.outline="",i.style.background=""};e.forEach((e=>{e.addEventListener("click",u)})),s&&s.addEventListener("click",L);const y=e=>{"Escape"===e.code&&E()},g=e=>{e.target===c&&E()},E=()=>{c.classList.add("hidden"),document.removeEventListener("click",g),document.removeEventListener("keypress",y),o.classList.remove("no-scroll")};n&&n.addEventListener("click",E);const k=e=>{e.preventDefault(),""===d.value?d.setCustomValidity("Заполните, пожалуйста, номер"):(d.setCustomValidity(""),L(),c.classList.remove("hidden"),document.addEventListener("click",g),document.addEventListener("keydown",y),o.classList.add("no-scroll")),d.reportValidity(),_()};IMask(d,{mask:"+{7}(000)000-00-00"});let p=!0,h="";try{h=localStorage.getItem("login")}catch(e){p=!1}const _=()=>{p&&localStorage.setItem("login",i.value)},f=()=>{h?(i.value=h,d.focus()):i.focus()},S=/^[A-zА-яЁё]+$/,q="Укажите, пожалуйста, имя",V="Заполните, пожалуйста, имя на кириллице или латинице",b="Слишком много букв",C=()=>{const e=i.value.toLowerCase().split(" ").every((e=>S.test(e)));i.setCustomValidity(""),e||(i.setCustomValidity(V),i.style.outline="2px solid red",i.style.background="pink"),i.value.length>10&&i.setCustomValidity(b),""===i.value&&i.setCustomValidity(q),i.reportValidity(),e||""===i.value||!i.value.length>10?(i.style.outline="",i.style.background=""):(i.style.outline="2px solid red",i.style.background="pink")},w=()=>{d.value.length<16&&d.value.length>1?d.setCustomValidity("Номер должен быть из 10 цифр"):d.setCustomValidity(""),d.reportValidity()}})(),(()=>{const e=window.matchMedia("(max-width: 1023px)"),t=document.querySelector(".navigation__list"),o=document.querySelector(".navigation__toggle-mobile"),s=document.querySelectorAll(".navigation__toggle-mobile svg");e.matches&&t.classList.add("hidden"),o.addEventListener("click",(()=>{t.classList.toggle("hidden"),s.forEach((e=>{e.classList.toggle("hidden")})),document.body.classList.toggle("no-scroll"),t.classList.toggle("scroll")}))})()})();