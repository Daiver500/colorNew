(()=>{"use strict";(()=>{const e=document.querySelectorAll(".button"),t=document.querySelector(".modal"),s=document.querySelector(".page"),o=document.querySelector(".modal__close"),n=document.querySelector(".modal-success__close"),c=document.querySelector(".modal__form"),r=document.querySelector(".modal__phone"),i=document.querySelector(".modal__name"),l=document.querySelector(".modal-success"),d=e=>{"Escape"===e.code&&L()},a=e=>{e.target===t&&L()},u=()=>{t.classList.remove("hidden"),document.addEventListener("click",a),document.addEventListener("keydown",d),s.classList.add("no-scroll"),k(),i.addEventListener("input",C),i.addEventListener("focusin",m),i.addEventListener("focusout",v),r.addEventListener("input",w),r.addEventListener("focusin",m),r.addEventListener("focusout",v),c.addEventListener("submit",E)},m=()=>{document.removeEventListener("keydown",d)},v=()=>{document.addEventListener("click",a)},L=()=>{t.classList.add("hidden"),document.removeEventListener("click",a),document.removeEventListener("keypress",d),s.classList.remove("no-scroll"),i.removeEventListener("input",C),i.removeEventListener("focusin",m),i.removeEventListener("focusout",v),r.removeEventListener("focusin",m),r.removeEventListener("focusout",v),r.removeEventListener("input",w),c.removeEventListener("submit",E),r.value="",i.style.outline="",i.style.background=""};e.forEach((e=>{e.addEventListener("click",u)})),o&&o.addEventListener("click",L);const f=e=>{"Escape"===e.code&&y()},_=e=>{e.target===l&&y()},y=()=>{l.classList.add("hidden"),document.removeEventListener("click",_),document.removeEventListener("keypress",f),s.classList.remove("no-scroll")};n&&n.addEventListener("click",y);const E=e=>{e.preventDefault(),""===r.value?r.setCustomValidity("Заполните, пожалуйста, номер"):(r.setCustomValidity(""),L(),l.classList.remove("hidden"),document.addEventListener("click",_),document.addEventListener("keydown",f),s.classList.add("no-scroll")),r.reportValidity(),h()};IMask(r,{mask:"+{7}(000)000-00-00"});let g=!0,p="";try{p=localStorage.getItem("login")}catch(e){g=!1}const h=()=>{g&&localStorage.setItem("login",i.value)},k=()=>{p?(i.value=p,r.focus()):i.focus()},S=/^[A-zА-яЁё]+$/,b="Укажите, пожалуйста, имя",q="Заполните, пожалуйста, имя на кириллице или латинице",V="Слишком много букв",C=()=>{const e=i.value.toLowerCase().split(" ").every((e=>S.test(e)));i.setCustomValidity(""),e||(i.setCustomValidity(q),i.style.outline="2px solid red",i.style.background="pink"),i.value.length>10&&i.setCustomValidity(V),""===i.value&&i.setCustomValidity(b),i.reportValidity(),e||""===i.value||!i.value.length>10?(i.style.outline="",i.style.background=""):(i.style.outline="2px solid red",i.style.background="pink")},w=()=>{r.value.length<16&&r.value.length>1?r.setCustomValidity("Номер должен быть из 10 цифр"):r.setCustomValidity(""),r.reportValidity()}})(),(()=>{const e=window.matchMedia("(max-width: 1023px)"),t=document.querySelector(".navigation__list"),s=document.querySelector(".navigation__toggle-mobile"),o=document.querySelectorAll(".navigation__toggle-mobile svg");e.matches&&t.classList.add("hidden"),s.addEventListener("click",(()=>{t.classList.toggle("hidden"),o.forEach((e=>{e.classList.toggle("hidden")})),document.body.classList.toggle("no-scroll"),t.classList.toggle("scroll")}))})(),(()=>{const e=document.querySelectorAll(".offers__button"),t=document.querySelectorAll(".offers__profit"),s=document.querySelector(".offers__list"),o=document.querySelectorAll(".offers__button-percent"),n=document.querySelectorAll(".offers__percents"),c=document.querySelector(".offers__list-percent"),r=()=>{t.forEach((e=>{e.classList.add("hidden"),e.classList.remove("offers__profit--active")})),e.forEach((e=>{e.classList.remove("offers__button--active")}))},i=(s=0)=>{t[s].classList.remove("hidden"),t[s].classList.add("offers__profit--active"),e[s].classList.add("offers__button--active")};r(),i(),s.addEventListener("click",(t=>{const s=t.target;s&&s.classList.contains("offers__button")&&e.forEach(((e,t)=>{s===e&&(r(),i(t))}))}));const l=()=>{n.forEach((e=>{e.classList.add("hidden"),e.classList.remove("offers__percents--active")})),o.forEach((e=>{e.classList.remove("offers__button--active")}))},d=(e=0)=>{n[e].classList.remove("hidden"),n[e].classList.add("offers__percents--active"),o[e].classList.add("offers__button--active")};l(),d(),c.addEventListener("click",(e=>{const t=e.target;t&&t.classList.contains("offers__button-percent")&&o.forEach(((e,s)=>{t===e&&(l(),d(s))}))}))})()})();