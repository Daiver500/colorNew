(()=>{"use strict";(()=>{const e=document.querySelectorAll(".button"),t=document.querySelector(".modal"),o=document.querySelector(".page"),c=document.querySelector(".modal__close"),s=document.querySelector(".modal-success__close"),l=document.querySelector(".modal__form"),d=document.querySelector(".modal__phone"),r=document.querySelector(".modal__name"),n=document.querySelector(".modal-success"),a=e=>{"Escape"===e.code&&m()},i=e=>{e.target===t&&m()},u=()=>{t.classList.remove("hidden"),g(),document.addEventListener("click",i),document.addEventListener("keydown",a),o.classList.add("no-scroll")},m=()=>{t.classList.add("hidden"),document.removeEventListener("click",i),document.removeEventListener("keypress",a),o.classList.remove("no-scroll")};e.forEach((e=>{e.addEventListener("click",u)})),c&&c.addEventListener("click",m);const v=e=>{"Escape"===e.code&&L()},y=e=>{e.target===n&&L()},L=()=>{n.classList.add("hidden"),document.removeEventListener("click",y),document.removeEventListener("keypress",v),o.classList.remove("no-scroll")};s&&s.addEventListener("click",L),l.addEventListener("submit",(function(e){e.preventDefault(),p(),S(),d.value="",r.value=""}));const p=()=>{0===r.value.length&&(r.setCustomValidity("Номер должен быть из 10 цифр"),r.reportValidity()),r.reportValidity()};IMask(d,{mask:"+{7}(000)000-00-00"});d&&d.addEventListener("input",(()=>{d.value.length<16?d.setCustomValidity("Номер должен быть из 10 цифр"):d.setCustomValidity(""),d.reportValidity()}));let E=!0,k="";try{k=localStorage.getItem("login")}catch(e){E=!1}const S=e=>{r&&d?E&&localStorage.setItem("login",r.value):(e.preventDefault(),r.setCustomValidity("Нужно ввести"),d.setCustomValidity("Нужно ввести телефон")),r.reportValidity(),d.reportValidity()},g=()=>{k?(r.value=k,d.focus()):r.focus()}})()})();