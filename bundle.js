(()=>{"use strict";(()=>{const e=document.querySelectorAll(".button"),t=document.querySelector(".modal"),c=document.querySelector(".page"),o=document.querySelector(".modal__close"),s=document.querySelector(".modal-success__close"),n=document.querySelector(".modal__form"),d=document.querySelector(".modal__phone"),l=document.querySelector(".modal__name"),r=document.querySelector(".modal-success"),a=e=>{"Escape"===e.code&&m()},i=e=>{e.target===t&&m()},u=()=>{t.classList.remove("hidden"),_(),document.addEventListener("click",i),document.addEventListener("keydown",a),c.classList.add("no-scroll")},m=()=>{t.classList.add("hidden"),document.removeEventListener("click",i),document.removeEventListener("keypress",a),c.classList.remove("no-scroll"),d.value=""};e.forEach((e=>{e.addEventListener("click",u)})),o&&o.addEventListener("click",m);const v=e=>{"Escape"===e.code&&y()},L=e=>{e.target===r&&y()},y=()=>{r.classList.add("hidden"),document.removeEventListener("click",L),document.removeEventListener("keypress",v),c.classList.remove("no-scroll")};s&&s.addEventListener("click",y),n.addEventListener("submit",(function(e){e.preventDefault(),S(),m(),r.classList.remove("hidden"),document.addEventListener("click",L),document.addEventListener("keydown",v),c.classList.add("no-scroll")})),IMask(d,{mask:"+{7}(000)000-00-00"});d&&d.addEventListener("input",(()=>{d.value.length<16?d.setCustomValidity("Номер должен быть из 10 цифр"):d.setCustomValidity(""),d.reportValidity()}));let E=!0,k="";try{k=localStorage.getItem("login")}catch(e){E=!1}const S=()=>{E&&localStorage.setItem("login",l.value)},_=()=>{k?(l.value=k,d.focus()):l.focus()}})()})();